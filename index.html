<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phone & Zombie Apocalypse Game</title>
  <style>
    body { margin: 0; background-color: #111; color: white; font-family: Arial, sans-serif; }
    h1 { text-align: center; font-family: Arial, sans-serif; }
    canvas { display: block; margin: auto; background: #222; }
    #gameMessage { text-align: center; margin-top: 10px; font-size: 20px; }
    .pad { display: grid; grid-template-columns: repeat(3, 100px); grid-gap: 10px; justify-content: center; margin-top: 20px; }
    .pad button { padding: 20px; font-size: 24px; background-color: #444; color: white; border: none; cursor: pointer; }
    .pad button:hover { background-color: #666; }
    #backToEarthButton { display: none; margin-top: 20px; padding: 10px 20px; background-color: #444; color: white; cursor: pointer; border: none; }
    .pad { display: grid; grid-template-columns: repeat(3, 100px); grid-gap: 10px; justify-content: center; }
  </style>
</head>
<body>
  <h1>ðŸ“± Phone & Zombie Apocalypse Game</h1>
  <div id="gameMessage">Get ready to play!</div>
  <div id="pad" class="pad">
    <button id="1" onclick="pressNumber(1)">1</button>
    <button id="2" onclick="pressNumber(2)">2</button>
    <button id="3" onclick="pressNumber(3)">3</button>
    <button id="4" onclick="pressNumber(4)">4</button>
    <button id="5" onclick="pressNumber(5)">5</button>
    <button id="6" onclick="pressNumber(6)">6</button>
    <button id="7" onclick="pressNumber(7)">7</button>
    <button id="8" onclick="pressNumber(8)">8</button>
    <button id="9" onclick="pressNumber(9)">9</button>
    <button id="0" onclick="pressNumber(0)">0</button>
  </div>
  <canvas id="gameCanvas" width="800" height="500"></canvas>
  <button id="backToEarthButton" onclick="goBackToEarth()">Go Back to Earth</button>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const gameMessage = document.getElementById("gameMessage");
    const backToEarthButton = document.getElementById("backToEarthButton");

    let gameStage = 0; // 0 - Phone Game, 1 - Zombie Game, 2 - Moon Game
    let phoneNumbersPressed = 0;
    let targetNumber;
    let gameRunning = true;

    // Phone Game Variables
    let level = 1;

    // Zombie Game Variables
    const player = {
      x: 100,
      y: canvas.height / 2,
      width: 30,
      height: 30,
      speed: 5,
      health: 100,
      bullets: [],
      gunAngle: 0,
      gunLength: 30,
    };

    let zombies = [];
    let zombieCount = 0;
    let zombieSpawnRate = 1000;
    let zombieHealthIncreaseInterval = 10000;

    // Moon Game Variables
    let onMoon = false;

    // Start Phone Game
    function startPhoneGame() {
      gameStage = 0;
      phoneNumbersPressed = 0;
      targetNumber = Math.floor(Math.random() * 10);
      gameMessage.textContent = "Phone Game: Press the number you see!";
      phoneGameLoop();
    }

    // Handle phone number button press
    function pressNumber(num) {
      if (gameRunning) {
        if (num === targetNumber) {
          phoneNumbersPressed++;
        } else {
          gameMessage.textContent = "Wrong number! Game over!";
          gameRunning = false;
          setTimeout(startPhoneGame, 2000);
        }
      }
    }

    // Phone Game Loop
    function phoneGameLoop() {
      if (phoneNumbersPressed >= 15) {
        gameMessage.textContent = "You won the phone game! Moving to Zombie Apocalypse...";
        setTimeout(startZombieGame, 2000);
        return;
      }

      targetNumber = Math.floor(Math.random() * 10);
      gameMessage.textContent = `Press ${targetNumber}... (Level ${level})`;
    }

    // Start Zombie Game
    function startZombieGame() {
      gameStage = 1;
      gameMessage.textContent = "Zombie Apocalypse: Survive!";
      setInterval(spawnZombie, zombieSpawnRate);
      setInterval(increaseZombieHealth, zombieHealthIncreaseInterval);
      gameLoop();
    }

    // Spawn a new zombie
    function spawnZombie() {
      const edge = Math.floor(Math.random() * 4);
      let x = edge === 0 ? canvas.width : edge === 1 ? 0 : Math.random() * canvas.width;
      let y = edge === 2 ? 0 : edge === 3 ? canvas.height : Math.random() * canvas.height;
      zombies.push({ x, y, size: 20, health: 3 });
    }

    // Increase zombie health over time
    function increaseZombieHealth() {
      zombies.forEach(z => {
        if (z.health < 10) z.health += 1;
      });
    }

    // Player shooting logic
    function shootBullet() {
      const angle = player.gunAngle;
      const speed = 10;
      const bullet = {
        x: player.x + Math.cos(angle) * player.gunLength,
        y: player.y + Math.sin(angle) * player.gunLength,
        dx: Math.cos(angle) * speed,
        dy: Math.sin(angle) * speed,
      };
      player.bullets.push(bullet);
    }

    // Move player using arrow keys
    function movePlayer() {
      if (keys["ArrowUp"] && player.y > 0) player.y -= player.speed;
      if (keys["ArrowDown"] && player.y < canvas.height - player.height) player.y += player.speed;
      if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
      if (keys["ArrowRight"] && player.x < canvas.width - player.width) player.x += player.speed;
    }

    // Update zombies and check for collisions
    function updateZombies() {
      zombies.forEach(z => {
        const dx = player.x - z.x;
        const dy = player.y - z.y;
        const dist = Math.sqrt(dx * dx + dy * dy);
        const speed = 1;

        if (dist > 10) {
          z.x += dx / dist * speed;
          z.y += dy / dist * speed;
        } else {
          player.health -= 1;
        }

        player.bullets.forEach((bullet, i) => {
          const bulletDist = Math.sqrt(Math.pow(bullet.x - z.x, 2) + Math.pow(bullet.y - z.y, 2));
          if (bulletDist < z.size) {
            z.health -= 1;
            player.bullets.splice(i, 1);
          }
        });

        if (z.health <= 0) {
          zombies.splice(zombies.indexOf(z), 1);
          zombieCount += 1;
        }
      });
    }

    // Draw game objects
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw player
      ctx.fillStyle = "white";
      ctx.fillRect(player.x - player.width / 2, player.y - player.height / 2, player.width, player.height);

      // Draw gun
      ctx.strokeStyle = "white";
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(player.x, player.y);
      ctx.lineTo(player.x + Math.cos(player.gunAngle) * player.gunLength, player.y + Math.sin(player.gunAngle) * player.gunLength);
      ctx.stroke();

      // Draw bullets
      ctx.fillStyle = "yellow";
      player.bullets.forEach(b => {
        ctx.beginPath();
        ctx.arc(b.x, b.y, 5, 0, Math.PI * 2);
        ctx.fill();
      });

      // Draw zombies
      ctx.fillStyle = "green";
      zombies.forEach(z => {
        ctx.beginPath();
        ctx.arc(z.x, z.y, z.size, 0, Math.PI * 2);
        ctx.fill();
      });

      // Check for player death
      if (player.health <= 0) {
        gameRunning = false;
        gameMessage.textContent = "You were overrun by zombies! Game Over!";
      }
    }

    // Game loop
    function gameLoop() {
      if (gameRunning) {
        movePlayer();
        updateZombies();
        draw();
        requestAnimationFrame(gameLoop);
      }
    }

    // Handle key presses
    let keys = {};
    document.addEventListener("keydown", (e) => keys[e.key] = true);
    document.addEventListener("keyup", (e) => keys[e.key] = false);
    document.addEventListener("keydown", (e) => {
      if (e.key === " " && gameRunning) shootBullet();
    });

    // Go back to Earth (Zombie game)
    function goBackToEarth() {
      gameStage = 1;
      onMoon = false;
      backToEarthButton.style.display = "none";
      startZombieGame();
    }

    // Initialize the game
    startPhoneGame();
  </script>
</body>
</html>
